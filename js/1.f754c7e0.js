(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"+0xP":function(t,e,i){"use strict";var a=i("sT0i"),s=i.n(a);s.a},"55Fg":function(t,e,i){"use strict";var a=i("x8vh"),s=i.n(a);s.a},C7OZ:function(t,e,i){"use strict";var a=i("G4yS"),s=i.n(a);s.a},EVHg:function(t,e,i){"use strict";var a=i("ODvD"),s=i.n(a);s.a},G4yS:function(t,e,i){},MwuI:function(t,e,i){"use strict";var a=i("snf/"),s=i.n(a);s.a},ODvD:function(t,e,i){},OkZ2:function(t,e,i){"use strict";var a=i("w+0d"),s=i.n(a);s.a},cndU:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background-image",style:t.styleObject},[i("div",{staticClass:"overlay"}),i("transition",{attrs:{name:"fade"}},[t.activePlaylist.id?t._e():i("div",{staticClass:"content select"},[i("h1",[t._v("Select your playlist:")]),i("div",{staticClass:"container"},t._l(t.playlists,function(e,a){return i("div",{key:e.id,staticClass:"item",on:{click:function(e){t.setActivePlaylistID(a)}}},[i("img",{attrs:{src:e.images[0].url}}),i("h3",[t._v(t._s(e.name))])])}))])]),i("transition",{attrs:{name:"fade"}},[t.activePlaylist.id?i("div",{staticClass:"content single"},[i("span",{staticClass:"back",on:{click:function(e){t.clear()}}},[t._v("\n        â† Select other playlist\n      ")]),i("h1",[t._v(t._s(t.activePlaylist.name))]),i("div",{staticClass:"container stats"},[t.loadStatus.playlistStats?t._e():i("div",{staticClass:"lds-roller"},[i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div")]),i("playlist-stats",{attrs:{init:t.activePlaylist.total,loader:t.loadStatus.playlistStats},on:{loaded:t.childLoaded}})],1),i("div",{staticClass:"container top"},[t.loadStatus.topUsers?t._e():i("div",{staticClass:"lds-roller"},[i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div")]),i("top-users",{attrs:{init:t.sortedUsers,loader:t.loadStatus.topUsers},on:{loaded:t.childLoaded}})],1),t.isSortedArrayRead?i("div",{staticClass:"container scoreboard"},[t.loadStatus.trackCount?t._e():i("div",{staticClass:"lds-roller"},[i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div")]),i("track-count",{attrs:{init:t.sortedArray,loader:t.loadStatus.trackCount},on:{loaded:t.childLoaded}})],1):t._e(),t.isSortedArrayRead?i("div",{staticClass:"container stats"},[t.loadStatus.userStats?t._e():i("div",{staticClass:"lds-roller"},[i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div")]),i("user-stats",{attrs:{init:t.sortedArray,loader:t.loadStatus.userStats},on:{loaded:t.childLoaded}})],1):t._e(),t.isSortedArrayRead?i("div",{staticClass:"achievements"},[t.loadStatus.playlistStats?t._e():i("div",{staticClass:"lds-roller"},[i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div")]),i("achievements",{attrs:{init:{sortedArray:t.sortedArray,tracksArray:t.tracksArray,users:t.users},loader:t.loadStatus.playlistStats},on:{loaded:t.childLoaded}})],1):t._e()]):t._e()])],1)},s=[],r=i("yT7P"),n=(i("f3/d"),i("yt8O"),i("rGqo"),i("LvDl")),o=i.n(n),c=i("umra"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isActive?i("div",[i("h2",[t._v("TOP USERS")]),i("div",{staticClass:"container"},t._l(t.usersTopThree,function(e,a){return i("div",{key:a,staticClass:"item"},[i("h3",[t._v(t._s(t.roman[a]+t.upperFirst(e.user)))]),i("img",{attrs:{src:t.getAvatar(e)}}),i("span",{staticClass:"reward"},[t._v(t._s(t.getRewardText(a)))])])}))]):t._e()},l=[],d=(i("VRzm"),i("xmWZ")),v=i("qpph"),p=i("D0BC"),f=i.n(p),h=function(){function t(){Object(d["a"])(this,t),this.texts=[["You are the real MVP!","Killing spree!","King of the Hill!","GG EZ","/all ff@15 ?"],["I'm impressed!","You are fast learner","Just a little bit!","Good job","Good score"],["You can do better","Maybe next time...","At least you tried...","Really?.. plz","Try harder!"]]}return Object(v["a"])(t,[{key:"getRewardText",value:function(t){return this.texts[t][f()(this.texts[t].length-1)]}}]),t}(),m=new h,g={props:{init:{type:Array,default:function(){return[]}},loader:{type:Boolean,default:function(){return!1}}},data:function(){return{defaultAvatar:"https://i.imgur.com/Ye3fsSH.jpg",roman:["I. ","II. ","III. "]}},computed:{usersTopThree:function(){return this.init.slice(0,3)},isActive:function(){return this.loader}},created:function(){var t=this;setTimeout(function(){t.$emit("loaded","topUsers")},1e3)},methods:{upperFirst:function(t){return o.a.upperFirst(t)},getAvatar:function(t){return t.extra.images.length>=1?t.extra.images[0].url:this.defaultAvatar},getRewardText:function(t){return m.getRewardText(t)}}},y=g,_=(i("C7OZ"),i("KHd+")),k=Object(_["a"])(y,u,l,!1,null,"16a9b11c",null),A=k.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isActive?i("div",[i("h2",[t._v("Overview")]),i("div",{staticClass:"overview-container"},t._l(t.users,function(e,a){return i("div",{key:a},[i("div",{staticClass:"card"},[i("img",{staticClass:"avatar",attrs:{src:t.getAvatar(e)}}),i("a",{attrs:{href:e.extra.external_urls.spotify,target:"_blank",title:"Open on Spotify"}},[i("img",{staticClass:"link",attrs:{src:"https://i.imgur.com/57bY4IR.png"}})]),i("h4",[t._v(t._s(t.upperFirst(e.user)))]),i("div",{staticClass:"stats"},[i("ul",{staticClass:"info"},[i("li",[i("span",[t._v("Tracks")]),i("span",{staticClass:"right"},[t._v(t._s(e.tracks.length))])]),i("li",[i("span",[t._v("Followers")]),i("span",{staticClass:"right"},[t._v(t._s(e.extra.followers.total))])]),i("li",[i("span",[t._v("Duration")]),i("span",{staticClass:"right"},[t._v(t._s(t.getTracksTime(e.tracks)))])]),i("li",[i("span",[t._v("Popularity")]),i("span",{staticClass:"right"},[t._v(t._s(t.getMeanPopularity(e.tracks)))])])])])])])}))]):t._e()},b=[],x={props:{init:{type:Array,default:function(){return[]}},loader:{type:Boolean,default:function(){return!1}}},data:function(){return{defaultAvatar:"https://i.imgur.com/Ye3fsSH.jpg"}},computed:{isActive:function(){return this.loader},users:function(){return this.init}},created:function(){var t=this;setTimeout(function(){t.$emit("loaded","userStats")},500)},methods:{getAvatar:function(t){return t.extra.images.length>=1?t.extra.images[0].url:this.defaultAvatar},upperFirst:function(t){return o.a.upperFirst(t)},getMeanPopularity:function(t){return o.a.round(o.a.meanBy(t,"track.popularity"))},getTracksTime:function(t){var e=this.getTracksDuration(t),i=e%1e3;e=(e-i)/1e3;var a=e%60;e=(e-a)/60;var s=e%60,r=(e-s)/60;return"".concat(r,"h ").concat(s,"min ").concat(a,"sec")},getTracksDuration:function(t){var e=0;return o.a.forEach(t,function(t){e+=t.track.duration}),e}}},S=x,T=(i("+0xP"),Object(_["a"])(S,C,b,!1,null,"7d279b48",null)),O=T.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isActive?i("div",[i("h2",[t._v("Tracks Count")]),i("div",{staticClass:"container"},t._l(t.users,function(e,a){return i("p",{key:a,staticClass:"item",style:t.fontSize(a)},[t._v("\n      "+t._s(t.upFirst(e.user))+":\n      "),i("span",[t._v(" "+t._s(e.tracks.length))])])}))]):t._e()},j=[],U=i("gQMU"),P=i.n(U),R={props:{init:{type:Array,default:function(){return[]}},loader:{type:Boolean,default:function(){return!1}}},data:function(){return{}},computed:{isActive:function(){return this.loader},users:function(){return this.init.slice(0,7)}},created:function(){var t=this;setTimeout(function(){t.$emit("loaded","trackCount")},500)},methods:{upFirst:function(t){return P()(t)},fontSize:function(t){return t<6?"font-size: ".concat(50-4*t,"px; opacity: ").concat(1-.15*t,";margin: ").concat(40-8*t,"px 0px;"):"font-size: 30px;opacity: 0.25;margin: 0px;"}}},I=R,$=(i("OkZ2"),Object(_["a"])(I,w,j,!1,null,"54e60922",null)),D=$.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isActive?i("div",[i("h2",[t._v("Achievements")]),i("div",{staticClass:"container"},[t._l(t.componentsArray,function(e){return[i(e,{key:e.name,tag:"component",attrs:{init:t.init}})]})],2)]):t._e()},M=[],F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("achievement-component",{attrs:{init:t.initializeAchievement}})},L=[],z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item achievement"},[i("div",{staticClass:"item__background",style:t.setStyle()},t._l(t.data.images,function(t,e){return i("img",{key:e,staticClass:"image",style:t.style,attrs:{src:t.url}})})),i("div",{staticClass:"item__content"},[i("span",{staticClass:"item__rarity",style:t.rarityColor},[t._v("\n      "+t._s(t.rarityName)+"\n    ")]),i("h3",[t._v(t._s(t.data.name))]),i("p",[t._v(t._s(t.data.description))])]),i("div",{staticClass:"item__foot"},[i("img",{staticClass:"item__avatar",attrs:{src:t.data.user.image}}),i("p",[t._v(t._s(t.data.user.name))])])])},B=[],H={props:{init:{type:Object,default:function(){return{name:"Achievement Name",rarity:"1",description:"Here is description",user:{name:"User",image:"https://i.imgur.com/Ye3fsSH.jpg"}}}}},data:function(){return{rarityColors:["green","blue","purple","Orange"],rarityNames:["Normal","Rare","Uniqe","Epic"]}},computed:{data:function(){return this.init},rarityColor:function(){return"color: ".concat(this.rarityColors[this.data.rarity])},rarityName:function(){return this.rarityNames[this.data.rarity]}},methods:{setStyle:function(){var t=Math.floor(360*Math.random())+1;return"background: linear-gradient(135deg,hsl(".concat(t,", 100%, 80%), hsl(").concat((t+120)%360,", 75%, 60%));")}}},N=H,G=(i("kbNA"),Object(_["a"])(N,z,B,!1,null,"29d5f9a3",null)),Y=G.exports,q={components:{AchievementComponent:Y},props:{init:{type:Object,default:function(){return{}}}},computed:{firstTrack:function(){return this.init.tracksArray.slice(0,1)},getUserID:function(){return this.firstTrack[0].added_by},getUserObject:function(){return this.init.users[this.getUserID]},getAvatar:function(){return this.getUserObject.extra.images.length>=1?this.getUserObject.extra.images[0].url:"https://i.imgur.com/Ye3fsSH.jpg"},initializeAchievement:function(){return{name:"First!",rarity:"0",description:"Nice, your song is the first one.",images:[{url:"https://i.imgur.com/wzZh1qW.png",style:"opacity: 0.2; top: -50px; left: -60px; height: 261px;"},{url:"https://i.imgur.com/51X8GWf.png",style:"top: -60px;left: 15px;"}],user:{name:this.getUserObject.user,image:this.getAvatar}}}}},Z=q,W=Object(_["a"])(Z,F,L,!1,null,null,null),K=W.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("achievement-component",{attrs:{init:t.initializeAchievement}})},J=[],Q={components:{AchievementComponent:Y},props:{init:{type:Object,default:function(){return{}}}},computed:{mostTracks:function(){return this.init.sortedArray[0]},getCount:function(){return this.mostTracks.tracks.length},getUserID:function(){return this.mostTracks.user},getUserObject:function(){return this.init.users[this.getUserID]},getAvatar:function(){return this.getUserObject.extra.images.length>=1?this.getUserObject.extra.images[0].url:"https://i.imgur.com/Ye3fsSH.jpg"},initializeAchievement:function(){return{name:"MVP!",rarity:"3",description:"Man, it's time to stop! ".concat(this.getCount," tracks? HOW?!"),images:[{url:"https://i.imgur.com/wzZh1qW.png",style:"opacity: 0.2; top: -40px; left: -50px; height: 261px;transform: rotate(180deg);"},{url:"https://i.imgur.com/D0MLaNW.jpg",style:"border-radius: 50000px;height: 200px;width:200px;position: relative;margin: 10px;box-shadow: 0px 3px 13px 0px rgba(0, 0, 0, 0.24);"}],user:{name:this.getUserObject.user,image:this.getAvatar}}}}},X=Q,tt=Object(_["a"])(X,V,J,!1,null,null,null),et=tt.exports,it={FirstTrack:K,MostTracks:et},at={components:Object(r["a"])({},it),props:{init:{type:Object,default:function(){return{}}},loader:{type:Boolean,default:function(){return!1}}},data:function(){return{componentsArray:o.a.keys(it)}},computed:{isActive:function(){return this.loader},sortedArray:function(){return this.init.sortedArray},tracks:function(){return this.init.tracksArray}},created:function(){var t=this;setTimeout(function(){t.$emit("loaded","achievements")},500)}},st=at,rt=(i("EVHg"),Object(_["a"])(st,E,M,!1,null,"2a75f28d",null)),nt=rt.exports,ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isActive?i("div",[i("h2",[t._v("Wow, there are "),i("u",[t._v(t._s(t.count))]),t._v(" tracks on this playlist")])]):t._e()},ct=[],ut=(i("xfY5"),{props:{init:{type:Number,default:function(){return 0}},loader:{type:Boolean,default:function(){return!1}}},computed:{isActive:function(){return this.loader},count:function(){return this.init}},created:function(){var t=this;setTimeout(function(){t.$emit("loaded","playlistStats")},500)}}),lt=ut,dt=(i("55Fg"),Object(_["a"])(lt,ot,ct,!1,null,"25c97038",null)),vt=dt.exports;o.a.mixin({log:function(t){return console.log(t),t}});var pt={name:"Dashboard",components:{TopUsers:A,UserStats:O,TrackCount:D,Achievements:nt,PlaylistStats:vt},data:function(){return{me:{},playlists:{},tracks:{},rawResponse:{},activePlaylist:{userId:""},users:{},order:{},tracksArray:[],loadStatus:{playlistStats:!1,topUsers:!1,trackCount:!1,userStats:!1,achievements:!1}}},computed:{isSortedArrayRead:function(){return this.loadStatus.topUsers},styleObject:function(){return{"--image":"url(".concat(this.activePlaylist.image,")")}},sortedTracks:function(){return o.a.map(this.tracks,function(t){return t.tracks})},sortedUsers:function(){var t=this.order,e=this.users,i=[];return o.a.forEach(t,function(t,a){i[t]=e[a]}),i},sortedArray:function(){var t=this;return o.a.map(this.sortedUsers,function(e,i){return{user:e.user,extra:e.extra,tracks:t.sortedTracks[i]}})}},created:function(){this.getMe(),this.getPlaylists()},methods:{getMe:function(){var t=this;c["a"].me().then(function(e){t.me=e.data})},getPlaylists:function(){var t=this;c["a"].getPlaylists().then(function(e){t.getCollaborative(e.data)}).catch(function(t){t&&(window.location=window.location.origin)})},getCollaborative:function(t){this.playlists=t.items.filter(function(t){return t.collaborative})},getRequestCount:function(){return Math.ceil(this.activePlaylist.total/100)},getTrackList:function(){var t=this,e=c["a"].getTrackList(this.activePlaylist.userId,this.activePlaylist.id,this.getRequestCount());Promise.all(e).then(function(e){t.setRawResponse(e),t.prepareTrackList()})},getTracksByUser:function(t){var e=this,i=t,a=o.a.chain(i).groupBy("added_by").map(function(t,e){return{user:e,tracks:t}}).orderBy(function(t){return t.tracks.length},"desc").forEach(function(t,i){return e.getUser(t.user),e.$set(e.$data.order,t.user,i),t}).value();this.$set(this.$data,"tracks",a)},getUser:function(t){var e=this;c["a"].getUserInfo(t).then(function(i){e.setUsername(t,{user:i.data.display_name||i.data.id,extra:i.data})})},setUsername:function(t,e){this.$set(this.users,t,e)},setActivePlaylistID:function(t){this.setActivePlaylist({id:this.playlists[t].id,name:this.playlists[t].name,total:this.playlists[t].tracks.total,userId:this.playlists[t].owner.id,image:this.playlists[t].images[0].url}),this.getTrackList()},setActivePlaylist:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.activePlaylist=t},setRawResponse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.rawResponse=t},clear:function(){var t=this;this.setActivePlaylist(),this.setRawResponse(),this.tracks=[],this.order={},this.users={},o.a.forOwn(this.loadStatus,function(e,i){t.loadStatus[i]=!1})},childLoaded:function(t){this.loadStatus[t]=!0},prepareTrackList:function(){var t=o.a.chain(this.rawResponse).map(function(t){return t.data.items}).flatMap().orderBy("added_at","asc").map(function(t){return{added_at:t.added_at,added_by:t.added_by.id,track:Object(r["a"])({name:t.track.name,artists:t.track.artists,duration:t.track.duration_ms,popularity:t.track.popularity},void 0!==t.track.album.images[0]?{image:t.track.album.images[0].url}:{image:null})}}).value();this.tracksArray=t,this.getTracksByUser(t),this.setRawResponse()}}},ft=pt,ht=(i("MwuI"),Object(_["a"])(ft,a,s,!1,null,"6db16a6a",null));e["default"]=ht.exports},kbNA:function(t,e,i){"use strict";var a=i("qKcG"),s=i.n(a);s.a},qKcG:function(t,e,i){},sT0i:function(t,e,i){},"snf/":function(t,e,i){},"w+0d":function(t,e,i){},x8vh:function(t,e,i){}}]);
//# sourceMappingURL=1.f754c7e0.js.map